{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"Index","text":"","path":["Index"],"tags":[]},{"location":"markdown/","level":1,"title":"Refer√™ncia","text":"<p>For full documentation visit zensical.org.</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#commands","level":2,"title":"Commands","text":"<ul> <li><code>zensical new</code> - Create a new project</li> <li><code>zensical serve</code> - Start local web server</li> <li><code>zensical build</code> - Build your site</li> </ul>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#examples","level":2,"title":"Examples","text":"","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#admonitions","level":3,"title":"Admonitions","text":"<p>Go to documentation</p> <p>Note</p> <p>This is a note admonition. Use it to provide helpful information.</p> <p>Warning</p> <p>This is a warning admonition. Be careful!</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#details","level":3,"title":"Details","text":"<p>Go to documentation</p> Click to expand for more info <p>This content is hidden until you click to expand it. Great for FAQs or long explanations.</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#code-blocks","level":2,"title":"Code Blocks","text":"<p>Go to documentation</p> Code blocks<pre><code>def greet(name):\n    print(f\"Hello, {name}!\") # (1)!\n\ngreet(\"Python\")\n</code></pre> <ol> <li> <p>Go to documentation</p> <p>Code annotations allow to attach notes to lines of code.</p> </li> </ol> <p>Code can also be highlighted inline: <code>print(\"Hello, Python!\")</code>.</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#content-tabs","level":2,"title":"Content tabs","text":"<p>Go to documentation</p> PythonRust <pre><code>print(\"Hello from Python!\")\n</code></pre> <pre><code>println!(\"Hello from Rust!\");\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#diagrams","level":2,"title":"Diagrams","text":"<p>Go to documentation</p> <pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#footnotes","level":2,"title":"Footnotes","text":"<p>Go to documentation</p> <p>Here's a sentence with a footnote.<sup>1</sup></p> <p>Hover it, to see a tooltip.</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#formatting","level":2,"title":"Formatting","text":"<p>Go to documentation</p> <ul> <li>This was marked (highlight)</li> <li>This was inserted (underline)</li> <li>This was deleted (strikethrough)</li> <li>H<sub>2</sub>O</li> <li>A<sup>T</sup>A</li> <li>Ctrl+Alt+Del</li> </ul>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#icons-emojis","level":2,"title":"Icons, Emojis","text":"<p>Go to documentation</p> <ul> <li> <code>:sparkles:</code></li> <li> <code>:rocket:</code></li> <li> <code>:tada:</code></li> <li> <code>:memo:</code></li> <li> <code>:eyes:</code></li> </ul>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#maths","level":2,"title":"Maths","text":"<p>Go to documentation</p> \\[ \\cos x=\\sum_{k=0}^{\\infty}\\frac{(-1)^k}{(2k)!}x^{2k} \\] <p>Needs configuration</p> <p>Note that MathJax is included via a <code>script</code> tag on this page and is not configured in the generated default configuration to avoid including it in a pages that do not need it. See the documentation for details on how to configure it on all your pages if they are more Maths-heavy than these simple starter pages.</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#task-lists","level":2,"title":"Task Lists","text":"<p>Go to documentation</p> <ul> <li> Install Zensical</li> <li> Configure <code>zensical.toml</code></li> <li> Write amazing documentation</li> <li> Deploy anywhere</li> </ul>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#tooltips","level":2,"title":"Tooltips","text":"<p>Go to documentation</p> <p>Hover me</p>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#markdown-in-5min","level":2,"title":"Markdown in 5min","text":"","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#headers","level":3,"title":"Headers","text":"<pre><code># H1 Header\n## H2 Header\n### H3 Header\n#### H4 Header\n##### H5 Header\n###### H6 Header\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#text-formatting","level":3,"title":"Text formatting","text":"<pre><code>**bold text**\n*italic text*\n***bold and italic***\n~~strikethrough~~\n`inline code`\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#links-and-images","level":3,"title":"Links and images","text":"<pre><code>[Link text](https://example.com)\n[Link with title](https://example.com \"Hover title\")\n![Alt text](image.jpg)\n![Image with title](image.jpg \"Image title\")\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#lists","level":3,"title":"Lists","text":"<pre><code>Unordered:\n- Item 1\n- Item 2\n  - Nested item\n\nOrdered:\n1. First item\n2. Second item\n3. Third item\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#blockquotes","level":3,"title":"Blockquotes","text":"<pre><code>&gt; This is a blockquote\n&gt; Multiple lines\n&gt;&gt; Nested quote\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#code-blocks_1","level":3,"title":"Code blocks","text":"<pre><code>```javascript\nfunction hello() {\n  console.log(\"Hello, world!\");\n}\n```\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#tables","level":3,"title":"Tables","text":"<pre><code>| Header 1 | Header 2 | Header 3 |\n|----------|----------|----------|\n| Row 1    | Data     | Data     |\n| Row 2    | Data     | Data     |\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#horizontal-rule","level":3,"title":"Horizontal rule","text":"<pre><code>---\nor\n***\nor\n___\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#task-lists_1","level":3,"title":"Task lists","text":"<pre><code>- [x] Completed task\n- [ ] Incomplete task\n- [ ] Another task\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#escaping-characters","level":3,"title":"Escaping characters","text":"<pre><code>Use backslash to escape: \\* \\_ \\# \\`\n</code></pre>","path":["Refer√™ncia"],"tags":[]},{"location":"markdown/#line-breaks","level":3,"title":"Line breaks","text":"<pre><code>End a line with two spaces  \nto create a line break.\n\nOr use a blank line for a new paragraph.\n</code></pre> <ul> <li> HTML for content and structure</li> <li> JavaScript for interactivity</li> <li> CSS for text running out of boxes</li> </ul> <ul> <li> <p> Set up in 5 minutes</p> <p>Install <code>zensical</code> with <code>pip</code> and get up and running in minutes</p> <p> Getting started</p> </li> <li> <p> It's just Markdown</p> <p>Focus on your content and generate a responsive and searchable static site</p> <p> Reference</p> </li> <li> <p> Made to measure</p> <p>Change the colors, fonts, language, icons, logo and more with a few lines</p> <p> Customization</p> </li> <li> <p> Open Source, MIT</p> <p>Zensical is licensed under MIT and available on [GitHub]</p> <p> License</p> </li> </ul> Image caption <ol> <li> <p>This is the footnote.¬†‚Ü©</p> </li> </ol>","path":["Refer√™ncia"],"tags":[]},{"location":"FastAPI/01/","level":1,"title":"Configura√ß√£o inicial","text":"Refer√™ncias <ul> <li>Documentation Poetry - Python dependency management and packaging made easy</li> </ul> Linux (Ubuntu/Debian)Windows <pre><code>sudo apt install pipx -y\npipx ensurepath \n</code></pre> <pre><code>python -m pip install --user pipx\npython -m pipx ensurepath\n</code></pre> <p>O Poetry √© uma ferramenta de gerenciamento de depend√™ncias e empacotamento para projetos Python, que usa um arquivo <code>pyproject.toml</code> para definir requisitos e metadados. Ele automatiza tarefas como instala√ß√£o e atualiza√ß√£o de pacotes, tornando a gest√£o de ambientes e projetos mais eficiente e organizada.</p> Instalar Poetry<pre><code>pipx install poetry\npipx inject poetry poetry-plugin-shell  # (1)!\n</code></pre> <ol> <li>Adiciona plugin <code>poetry-plugin-shell</code> ao Poetry j√° instalado, permitindo o uso de funcionalidades adicionais relacionadas ao shell na sua configura√ß√£o do Poetry.</li> </ol> Cria√ß√£o de Projetos<pre><code>poetry new --flat fast_zero # (1)!\ncd fast_zero\n</code></pre> <ol> <li>Sobre <code>flat</code> e <code>src</code> aqui.</li> </ol> <p>Criar√° uma estrutura de arquivos e pastas como essa:</p> <pre><code>.\n‚îú‚îÄ‚îÄ fast_zero\n‚îÇ  ‚îî‚îÄ‚îÄ __init__.py\n‚îú‚îÄ‚îÄ pyproject.toml\n‚îú‚îÄ‚îÄ README.md\n‚îî‚îÄ‚îÄ tests\n   ‚îî‚îÄ‚îÄ __init__.py\n</code></pre> Instalar FastAPI<pre><code>poetry install # (1)!\npoetry add 'fastapi[standard]' # (2)!\n</code></pre> <ol> <li>L√™ o arquivo <code>pyproject.toml</code> e instala todas as depend√™ncias listadas nele dentro de um ambiente virtual isolado. Se for a primeira vez, ele cria o arquivo <code>poetry.lock</code> para travar as vers√µes exatas; se o arquivo j√° existir, ele instala exatamente o que est√° travado l√°.</li> <li>Adiciona o pacote FastAPI ao seu projeto. O sufixo <code>[standard]</code> inclui depend√™ncias extras recomendadas (como o servidor Uvicorn). O Poetry baixa o pacote, atualiza o arquivo de configura√ß√µes (<code>pyproject.toml</code>) e o arquivo de trava (<code>poetry.lock</code>) automaticamente.</li> </ol> app.py Base<pre><code>from fastapi import FastAPI\n\napp = FastAPI()\n\n@app.get(\"/\")\ndef read_root():\n    return {'message': 'Ol√° Mundo!'}\n</code></pre> Rodar FastAPI<pre><code>poetry shell\nfastapi dev app.py # (1)!\n</code></pre> <ol> <li>Ou <code>fastapi dev app.py --port 8001</code> para escolher a porta onde vai rodar (o padr√£o √© <code>8000</code>)</li> </ol> <p>Vai aparecer algo assim no terminal:</p> <p><pre><code>   FastAPI   Starting development server üöÄ\n\n             Searching for package file structure from directories with __init__.py files\n             Importing from /home/giobon/distrobox/ubuntu-home/CODE/FastAPI/fast_zero\n\n    module   üêç app.py\n\n      code   Importing the FastAPI app object from the module with the following code:\n\n             from app import app\n\n       app   Using import string: app:app\n\n    server   Server started at http://127.0.0.1:8000\n    server   Documentation at http://127.0.0.1:8000/docs\n\n       tip   Running in development mode, for production use: fastapi run\n\n             Logs:\n\n      INFO   Will watch for changes in these directories: ['/home/giobon/distrobox/ubuntu-home/CODE/FastAPI/fast_zero']\n     ERROR   [Errno 98] Address already in use\n</code></pre> Onde:</p> <ul> <li><code>http://127.0.0.1:8000</code> √© o endpoint <code>/</code> da API</li> <li><code>http://127.0.0.1:8000/docs</code> √© a documenta√ß√£o Swagger dessa API</li> </ul>","path":["FastAPI","Configura√ß√£o inicial"],"tags":["poetry"]},{"location":"FastAPI/02/","level":1,"title":"CRUD","text":"<p>No desenvolvimento de APIs, existem quatro a√ß√µes principais que fazemos com os dados: criar, ler, atualizar e excluir. Com essas opera√ß√µes podemos realizar qualquer tipo de comportamento em uma base dados. Podemos criar um registro, em seguida alter√°-lo, e depois delet√°-lo.</p> <p>Quando falamos de APIs servindo dados, todas essas opera√ß√µes t√™m alguma forma similar no protocolo HTTP. O protocolo tem verbos para indicar essas mesmas a√ß√µes que queremos representar no banco de dados.</p> <ul> <li><code>POST</code>: √© usado para solicitar que o servidor aceite um dado para a cria√ß√£o do recurso enviado pelo cliente.</li> <li><code>GET</code>: √© usado para quando o cliente deseja requisitar uma informa√ß√£o do servidor.</li> <li><code>PUT</code>: √© usando no momento em que o cliente deseja informar alguma altera√ß√£o nos dados para o servidor.</li> <li><code>PATCH</code>: √© usado quando o cliente quer aplicar atualiza√ß√µes parciais a um recurso existente, enviando apenas os dados que precisam ser modificados.</li> <li><code>DELETE</code>: usado para dizer ao servidor que delete determinado recurso.</li> </ul>","path":["FastAPI","CRUD"],"tags":["pydantic"]},{"location":"FastAPI/02/#post-e-get","level":2,"title":"<code>POST</code> e <code>GET</code>","text":"Refer√™ncias <ul> <li>Pydantic</li> </ul> <p>Estrutura do projeto: <pre><code>‚îî‚îÄ‚îÄ fast_zero\n    ‚îú‚îÄ‚îÄ app.py\n    ‚îú‚îÄ‚îÄ fast_zero\n    ‚îú‚îÄ‚îÄ poetry.lock\n    ‚îú‚îÄ‚îÄ pyproject.toml\n    ‚îú‚îÄ‚îÄ schemas.py\n    ‚îî‚îÄ‚îÄ tests\n        ‚îî‚îÄ‚îÄ __init__.py\n</code></pre></p> app.py<pre><code>from fastapi import FastAPI\nfrom schemas import UserSchema, UserResponse, UserDB, UserList\n\napp = FastAPI() # (1)!\n\n@app.get(\"/\", summary=\"Endpoint raiz\") # (2)!\ndef read_root():\n    return {'message': 'API FUNCIONANDO!'}\n\ndatabase = [] # (3)!\n\n@app.post(\"/users/\", status_code=201, response_model=UserResponse, summary=\"Cria um usu√°rio\")# (4)!\ndef create_user(user: UserSchema):\n\n    dados_do_usuario = user.model_dump() # (5)!\n\n    novo_id = len(database) + 1 # (6)!\n\n    user_with_id = UserDB( # (7)!\n        id=novo_id,\n        username=dados_do_usuario[\"username\"],\n        email=dados_do_usuario[\"email\"],\n        password=dados_do_usuario[\"password\"]\n    )\n\n    database.append(user_with_id) # (8)!\n    # (9)!\n\n    return {\n        \"message\": \"Usu√°rio criado com sucesso\",\n        \"user\": user_with_id\n    }\n\n@app.get('/users/', response_model=UserList, summary=\"Retorna todos os usu√°rios\")\ndef read_users():\n    return {'users': database} # (10)!\n</code></pre> <ol> <li>Criamos a inst√¢ncia do FastAPI</li> <li>Dizemos que quando algu√©m acessar a \"raiz\" (<code>/</code>) via GET, execute esta fun√ß√£o: <code>read_root</code></li> <li>Banco de dados \"fake\" em mem√≥ria</li> <li>Em <code>response_model</code> especifica que a resposta de uma rota deve seguir a estrutura definida pelo modelo <code>UserResponse</code>, o que permite valida√ß√£o autom√°tica da resposta e documenta√ß√£o automatica</li> <li><code>model_dump()</code> transforma os dados validados enviados para a rota POST em um dicion√°rio simples, permitindo acesso f√°cil e garantindo que apenas os dados v√°lidos do <code>UserSchema</code> sejam inclu√≠dos.</li> <li>Calculado o <code>ID</code> manualmente baseando-se no tamanho atual da lista</li> <li>Esse trecho cria uma nova inst√¢ncia do modelo <code>UserDB</code>, que representa o usu√°rio no \"banco de dados\", atribuindo a ele um ID gerado (<code>novo_id</code>) e preenchendo os campos <code>username</code>, <code>email</code> e <code>password</code> com os dados extra√≠dos do dicion√°rio <code>dados_do_usuario</code>.</li> <li>Adiciona o objeto <code>user_with_id</code>, que representa um novo usu√°rio, √† lista <code>database</code>. Isso simula o armazenamento do usu√°rio no \"banco de dados\", que, neste caso, √© apenas uma lista em mem√≥ria, permitindo que os dados dos usu√°rios sejam mantidos e acessados posteriormente.</li> <li>O destaque acima poderia ser substitu√≠do por essas duas linhas:     <pre><code>user_with_id = UserDB(**user.model_dump(), id=len(database) + 1)  \ndatabase.append(user_with_id)\n</code></pre>     Sobre o uso de <code>user.model_dump()</code> <sup>1</sup> e <code>**user.model_dump()</code> <sup>2</sup></li> <li>Retorna um dicion√°rio com a chave <code>users</code> e a lista <code>database</code> como valor, representando todos os usu√°rios armazenados</li> </ol> <p>Sobre o uso de <code>user.model_dump()</code> <sup>1</sup></p>","path":["FastAPI","CRUD"],"tags":["pydantic"]},{"location":"FastAPI/02/#schemas","level":2,"title":"Schemas","text":"<p>Os Schemas no Pydantic s√£o classes que definem a estrutura dos dados em uma aplica√ß√£o, agindo como um contrato para garantir que os dados que entram ou saem da API estejam conformes √†s expectativas. Eles s√£o criados a partir de <code>BaseModel</code>, utilizando anota√ß√µes de tipo para definir regras. Os principais prop√≥sitos dos schemas s√£o:</p> <ol> <li>Valida√ß√£o: Verificam automaticamente se os dados est√£o corretos.</li> <li>Convers√£o: Transformam tipos de dados, como strings em inteiros.</li> <li>Serializa√ß√£o: Facilitam a convers√£o de objetos em dicion√°rios ou JSON.</li> </ol> <p>No FastAPI, os schemas s√£o usados para validar a entrada de dados em fun√ß√µes de endpoint e filtrar a sa√≠da de dados, protegendo informa√ß√µes sens√≠veis. Boas pr√°ticas incluem ter diferentes schemas para diferentes situa√ß√µes, como cria√ß√£o, atualiza√ß√£o e exposi√ß√£o de dados. Em resumo, os schemas garantem que os dados estejam formatados corretamente antes de serem processados na aplica√ß√£o.</p> <p>Em rela√ß√£o ao projeto, o arquivo abaixo cont√©m as defini√ß√µes de schemas de dados utilizando o Pydantic, que s√£o essenciais para validar e estruturar as informa√ß√µes utilizadas na aplica√ß√£o FastAPI definida em <code>app.py</code>.</p> <p>As classes definidas no arquivo servem como modelos que especificam os atributos e seus tipos para os dados utilizados na aplica√ß√£o, utilizando o Pydantic. Cada classe define campos, como <code>username</code>, <code>email</code>, e <code>password</code>, e seus tipos correspondentes (por exemplo, <code>str</code> e <code>EmailStr</code>), garantindo que os dados sejam automaticamente validados e estruturados de maneira consistente ao interagir com a API.</p> schemas.py<pre><code>from pydantic import BaseModel, EmailStr # (2)!\n\nclass UserSchema(BaseModel):\n    username: str\n    email: EmailStr\n    password: str\n\nclass UserPublic(BaseModel):\n    username: str\n    email: EmailStr\n\nclass UserResponse(BaseModel):\n    message: str\n    user: UserPublic\n\nclass UserDB(UserSchema): # (1)!\n    id: int\n\nclass UserList(BaseModel):\n    users: list[UserPublic]\n</code></pre> <ol> <li>Indica que a classe <code>UserDB</code> herda da classe <code>UserSchema</code>. Isso significa que <code>UserDB</code> possui todos os atributos e valida√ß√µes definidos em <code>UserSchema</code>, al√©m de adicionar um novo atributo, <code>id</code>, do tipo <code>int</code>. Essa heran√ßa permite que <code>UserDB</code> aproveite a estrutura e a valida√ß√£o de dados j√° configuradas em <code>UserSchema</code>, facilitando a cria√ß√£o de modelos de dados mais especializados.</li> <li><code>BaseModel</code> √© uma classe do Pydantic que permite criar modelos de dados, oferecendo valida√ß√£o autom√°tica, f√°cil convers√£o para JSON e aprimoramento na documenta√ß√£o de APIs. √â essencial para construir modelos consistentes e validados.</li> </ol>","path":["FastAPI","CRUD"],"tags":["pydantic"]},{"location":"FastAPI/02/#put-patch-e-delete","level":2,"title":"<code>PUT</code>, <code>PATCH</code> e <code>DELETE</code>","text":"app.py<pre><code>from fastapi import FastAPI, HTTPException\nfrom schemas import UserSchema, UserResponse, UserDB, UserList, UserPublic\n\n...\n\n@app.put('/users/{user_id}', response_model=UserPublic, summary=\"Atualiza totalmente um usu√°rio\")\ndef update_user(user_id: int, user: UserSchema): # (1)!\n    if user_id &gt; len(database) or user_id &lt; 1: # (2)!\n        raise HTTPException( # (3)!\n            status_code=404, detail='User not found'\n        ) \n\n    user_with_id = UserDB(**user.model_dump(), id=user_id) # (4)!\n    database[user_id - 1] = user_with_id # (5)!\n\n    return user_with_id\n\n@app.patch('/users/{user_id}', response_model=UserPublic, summary=\"Atualiza parcialmente um usu√°rio\")\ndef patch_user(user_id: int, user: UserUpdate):\n\n    if user_id &gt; len(database) or user_id &lt; 1:\n        raise HTTPException(status_code=404, detail='User not found')\n\n    user_atual = database[user_id - 1] # (6)!\n    update_data = user.model_dump(exclude_unset=True) # (7)!\n    user_atualizado = user_atual.model_copy(update=update_data) # (8)!\n    database[user_id - 1] = user_atualizado # (9)!\n\n    return user_atualizado\n\n@app.delete('/users/{user_id}', response_model=Message, summary=\"Deleta um usu√°rio\")\ndef delete_user(user_id: int):\n    if user_id &gt; len(database) or user_id &lt; 1:\n        raise HTTPException(\n            status_code=HTTPStatus.NOT_FOUND, detail='User not found'\n        )\n\n    del database[user_id - 1] # (10)!\n\n    return {'message': 'User deleted'}\n</code></pre> <ol> <li>O par√¢metro <code>user_id</code>, que deve ser um n√∫mero inteiro, identifica qual usu√°rio deve ser atualizado, enquanto o par√¢metro <code>user</code>, que segue o modelo <code>UserSchema</code>, cont√©m os dados que ser√£o utilizados na atualiza√ß√£o. Assim, a fun√ß√£o combina esses dois elementos para localizar e modificar as informa√ß√µes do usu√°rio correspondente no banco de dados.   </li> <li>Avalia se o identificador do usu√°rio √© maior que o n√∫mero total de usu√°rios no banco de dados ou menor que 1. Se qualquer uma dessas condi√ß√µes for verdadeira, a fun√ß√£o gera uma exce√ß√£o HTTP 404, utilizando <code>raise HTTPException</code>, indicando que o usu√°rio n√£o foi encontrado.</li> <li>Esse trecho gera uma exce√ß√£o HTTP 404, indicando que o usu√°rio n√£o foi encontrado. Ele utiliza <code>HTTPException</code> com <code>status_code=404</code> e a mensagem <code>detail='User not found'</code> para informar ao cliente que o recurso solicitado n√£o existe.</li> <li>Cria uma nova inst√¢ncia de <code>UserDB</code> usando os dados recebidos. Ao usar <code>**user.model_dump()</code>, o operador <code>**</code> desempacota o dicion√°rio resultante, permitindo que seus pares chave-valor sejam passados como argumentos nomeados para uma fun√ß√£o ou construtor</li> <li>Substitui o usu√°rio existente no banco de dados. Aqui, <code>user_with_id</code> (a nova inst√¢ncia com os dados atualizados) √© atribu√≠do √† posi√ß√£o correspondente a <code>user_id - 1</code> na lista database, substituindo quaisquer dados que estavam anteriormente nesse √≠ndice. O <code>-1</code> √© usado para ajustar o √≠ndice porque a contagem em listas em Python come√ßa do zero, enquanto os identificadores de usu√°rio (neste caso, <code>user_id</code>) geralmente come√ßam a partir de 1.</li> <li>Busca o registro do usu√°rio que est√° sendo atualizado a partir do <code>database</code>, usando o <code>user_id</code> fornecido</li> <li>A classe <code>UserUpdate</code> define um modelo com tr√™s campos opcionais: <code>username</code>, <code>email</code> e <code>password</code>. Cada um desses campos pode ser atualizado individualmente, permitindo que o usu√°rio altere apenas as informa√ß√µes desejadas. Utilizando o m√©todo <code>model_dump(exclude_unset=True)</code>, apenas os campos que o usu√°rio fornecer no JSON ser√£o inclu√≠dos na atualiza√ß√£o, garantindo que dados n√£o mencionados permane√ßam inalterados. Usar <code>exclude_unset=True</code> garante que o seu <code>model_copy(update=...)</code> receba apenas as \"pe√ßas\" que precisam ser trocadas, mantendo todas as outras pe√ßas originais intactas.</li> <li>Cria uma nova inst√¢ncia do usu√°rio atual, chamada <code>user_atualizado</code>, aplicando as altera√ß√µes contidas em <code>update_data</code>. O m√©todo <code>model_copy</code> do Pydantic √© utilizado para gerar uma c√≥pia do objeto original, mesclando os novos dados com os existentes. Isso permite que as atualiza√ß√µes sejam feitas de forma segura, preservando a integridade do objeto original e garantindo que apenas os campos especificados em <code>update_data</code> sejam modificados. Veja <sup>3</sup></li> <li>Substitui o registro antigo do usu√°rio no <code>database</code> pelo novo objeto <code>user_atualizado</code>. Isso atualiza a lista com as informa√ß√µes alteradas, garantindo que os dados mais recentes sejam armazenados corretamente.</li> <li>Remove um item da lista <code>database</code> no √≠ndice correspondente ao <code>user_id</code> fornecido. O comando <code>del</code> exclui o objeto do usu√°rio daquela posi√ß√£o, garantindo que o registro seja completamente removido da lista.</li> </ol> <p>Com isso conclu√≠mos um CRUD simples de usu√°rio de uma aplica√ß√£o, usando FastAPI </p> <ol> <li> <p>O <code>model_dump()</code> √© um m√©todo do Pydantic (a biblioteca que o FastAPI usa por baixo dos panos para valida√ß√£o de dados). De forma bem direta: ele pega o objeto da sua classe (que √© uma inst√¢ncia complexa do Python) e o converte em um dicion√°rio comum (<code>dict</code>). Quando voc√™ recebe <code>user: UserSchema</code> no seu endpoint, o FastAPI j√° validou os dados, mas o <code>user</code> ainda √© um objeto Pydantic. Se voc√™ precisar manipular esses dados como uma cole√ß√£o de chave-valor, o <code>model_dump()</code> faz isso. <pre><code># O que voc√™ tem (Objeto Pydantic)\nuser.username  # Acessa como atributo\n\n# O que o model_dump() gera (Dicion√°rio)\n{'username': 'joao', 'email': 'joao@email.com'}\n</code></pre> ‚Ü©‚Ü©</p> </li> <li> <p>O que √© o <code>**</code> (double asterisk): No c√≥digo, voc√™ viu isto: <code>UserDB(**user.model_dump() ...</code> O <code>**</code> √© o operador de desempacotamento (unpacking). Ele pega o dicion√°rio gerado e \"espalha\" as chaves como argumentos para o novo objeto. Na pr√°tica, isso: <pre><code>dados = user.model_dump() # {'name': 'Leo', 'email': 'a@a.com'}\nUserDB(**dados, id=1)\n# √â exatamente igual a fazer isso:\nUserDB(name='Leo', email='a@a.com', id=1)\n</code></pre> ‚Ü©</p> </li> <li> <p>O <code>model_copy()</code> √© um dos m√©todos mais √∫teis do Pydantic para lidar com a imutabilidade e a atualiza√ß√£o de dados.Em termos simples: ele cria uma c√≥pia id√™ntica de uma inst√¢ncia do seu modelo, mas permite que voc√™ sobrescreva valores espec√≠ficos durante esse processo. Imagine que voc√™ tem um usu√°rio carregado do banco de dados e quer alterar apenas o email. Em vez de editar o objeto original (o que pode causar efeitos colaterais), voc√™ gera uma c√≥pia atualizada. <pre><code>user_original = UserDB(id=1, username=\"leo\", email=\"velho@email.com\")\n\n# Criando a c√≥pia com a altera√ß√£o\nnovo_user = user_original.model_copy(update={'email': 'novo@email.com'})\n\nprint(user_original.email) # Continua \"velho@email.com\"\nprint(novo_user.email)     # Agora √© \"novo@email.com\"\n</code></pre> ‚Ü©</p> </li> </ol>","path":["FastAPI","CRUD"],"tags":["pydantic"]}]}